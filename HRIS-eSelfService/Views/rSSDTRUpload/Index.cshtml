
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Angular/ng-rSSDTRUpload.js"></script>
<style type="text/css">
    @@media only screen and (min-width: 1300px) {
        .div_content_override {
            padding: 10px 10px 130px 10px;
        }
    }

    @@media only screen and (max-width: 769px) {
        .div_content_override {
            padding-top: 10px !important;
        }
    }

    .select2-selection__clear {
        font-size: 14px !important;
    }

    .select2-close-mask {
        z-index: 2099;
    }

    .select2-dropdown {
        z-index: 3051;
    }

    .select2-selection__rendered {
        line-height: 31px !important;
    }

    .select2-container .select2-selection--single {
        height: 35px !important;
    }

    .select2-selection__arrow {
        height: 34px !important;
    }

    /*.table > thead > tr > th {
        background-color: #1AB394 !important;
    }*/

    .my-custom-scrollbar {
        position: relative;
        height: 290px;
        overflow: auto;
    }

    .table-wrapper-scroll-y {
        display: block;
    }

    .dont_show_cancel_file {
        visibility: hidden;
    }

    .dtr-up-modal-hdr {
        background-color: #F7A54A !important;
    }

    .dtr-del-modal-hdr {
        background-color: #EC4758 !important;
    }

    .dtr-print-modal-hdr {
        background-color: #1AB394 !important;
    }

    .atsfield {
        border: 1px solid #5c5 !important;
        font-size: 20px !important;
    }

    .disable_field {
        background-color: white !important;
    }

    table#datalist_grid {
        font-weight: bold;
    }

    table#datalist_grid2 {
        font-weight: bold;
    }

    span.required {
        border: 1px solid red !important;
    }
</style>

<section ng-app="ng_selfService_App" ng-controller="rSSDTRUpload_ctrlr" class="with-background">
    <!-- Upload Inialiazing Modal -->
    <div class="modal fade" id="modal_upload_initializing">
        <div class="modal-dialog modal-force-center modal-md">
            <div class="modal-dialog text-center">
                <div class="col-lg-12" style="background-color:transparent !important;margin-top:30% !important;">
                    <div class="spiner-example fa-2x">
                        <div class="sk-spinner sk-spinner-three-bounce" style="width:300px;height:300px;">
                            <span style="color:white !important;"> {{ upload_generate_text }} </span>
                            <div class="sk-bounce1" style="background-color: white !important;"></div>
                            <div class="sk-bounce2" style="background-color: white !important;"></div>
                            <div class="sk-bounce3" style="background-color: white !important;"></div>
                            <br />
                            <span style="color:white !important;font-size:18px;"> {{ upload_generate_text2 }} </span>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transfer Time Entry Modal -->
    <div class="modal fade" id="transfer_modal" tabindex="-1" role="dialog" aria-labelledby="modalLabelSmall" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content animated flipInY modal-content-add-edit">
                <div class="modal-header dtr-up-modal-hdr text-white">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="exchange_modal_title">Transfer Time Entry</h4>
                </div>
                <div class="modal-body with-background">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">
                                <label style="margin-left:15px;">Employee Name</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="text" placeholder="Employee Name" id="up_empl_name" ng-model="up_empl_name" class="form-control text-left block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;">ID No.</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="text" placeholder="ID No" id="up_empl_id" ng-model="up_empl_id" class="form-control text-left block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>

                            <div class="row">
                                <hr style="margin-top:10px;margin-bottom:6px" />
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;">Date</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="text" placeholder="Date" id="up_dtr_date" ng-model="up_dtr_date" class="form-control text-left block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;padding-top:9px;">From</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-xs-6">
                                    <select class="form-control field-select-sm text-center" id="ddl_entry_type" ng-model="ddl_entry_type" ng-change="SelectEntryType()">
                                        <option value="1" selected>AM IN</option>
                                        <option value="2">AM OUT</option>
                                        <option value="3">PM IN</option>
                                        <option value="4">PM OUT</option>
                                    </select>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <input type="text" placeholder="00:00" id="time_entry" ng-model="time_entry" class="form-control text-center block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;padding-top:9px;">Transfer To</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-xs-6">
                                    <select class="form-control field-select-sm text-center" id="ddl_entry_type2" ng-model="ddl_entry_type2" ng-change="SelectEntryType2()">
                                        <option value="1" selected>AM IN</option>
                                        <option value="2">AM OUT</option>
                                        <option value="3">PM IN</option>
                                        <option value="4">PM OUT</option>
                                    </select>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <input type="text" placeholder="00:00" id="time_entry2" ng-model="time_entry2" class="form-control text-center block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-sm-12">
                            <button id="dtr_exchange" class="btn btn-warning pull-right" ng-click="btn_exchange_confirm()"><i class="fa fa-refresh"></i> Confirm Transfer</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Transfer Time Entry Modal -->
    <!-- Delete Modal -->
    <div class="modal fade" id="delete_modal" tabindex="-1" role="dialog" aria-labelledby="modalLabelSmall" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content animated flipInY modal-content-add-edit">
                <div class="modal-header dtr-del-modal-hdr text-white">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="delete_modal_title"> Delete Time Entry </h4>
                </div>
                <div class="modal-body with-background">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">
                                <label style="margin-left:15px;">Employee Name</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="text" placeholder="Employee Name" id="del_empl_name" ng-model="del_empl_name" class="form-control text-left block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;padding-top:9px;">ID No.</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="text" placeholder="ID No" id="del_empl_id" ng-model="del_empl_id" class="form-control text-left block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>

                            <div class="row">
                                <hr style="margin-top:10px;margin-bottom:10px" />
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;">Date</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="text" placeholder="Date" id="del_dtr_date" ng-model="del_dtr_date" class="form-control text-left block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                            <div class="row">
                                <label style="margin-left:15px;padding-top:9px;">Entry To Delete</label>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <select class="form-control field-select-sm text-center" id="ddl_entry_type3" ng-model="ddl_entry_type3" ng-change="SelectEntryType3()">
                                        <option value="1" selected>AM IN</option>
                                        <option value="2">AM OUT</option>
                                        <option value="3">PM IN</option>
                                        <option value="4">PM OUT</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <input type="text" placeholder="00:00" id="time_entry3" ng-model="time_entry3" class="form-control text-center block pull-right disable_field atsfield" disabled />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-sm-12">
                            <button id="dtr_delete" class="btn btn-danger pull-right" ng-click="btn_delete_confirm()"><i class="fa fa-trash"></i> Confirm Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Add Class Modal -->
    
    <!-- Print DTR Modal -->
    <div class="modal fade" id="dtr_print_empl_modal" role="dialog" aria-labelledby="modalLabelSmall" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content animated flipInY modal-content-add-edit">
                <div class="modal-header dtr-print-modal-hdr text-white">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="exchange_modal_title">DTR Printing - {{ empl_id }}</h4>
                </div>
                <div class="modal-body with-background">
                    <div class="row">
                        <div class="row">
                            <div class="col-sm-3" style="padding-top:5px">
                                <label>Employee Name :</label>
                            </div>
                            <div class="col-sm-9">
                                <input class="form-control font-bold" disabled id="txtb_empl_name" ng-model="txtb_empl_name" />
                            </div>
                        </div>

                        <div class="row" style="padding-top:5px;">
                            <div class="col-sm-3" style="padding-top:5px">
                                <label>Month - Year :</label>
                            </div>
                            <div class="col-sm-3">
                                <input class="form-control font-bold" disabled id="txtb_mon_year" ng-model="txtb_mon_year" />
                            </div>
                            <div class="col-sm-2" style="padding-top:5px">
                                <label>View Type:</label>
                            </div>
                            <div class="col-sm-4">
                                <select class="form-control" id="ddl_viewtype" ng-model="ddl_viewtype">
                                    <option value="0" selected>Whole Month</option>
                                    <option value="1">1st Quincena</option>
                                    <option value="2">2nd Quincena</option>
                                </select>
                            </div>
                        </div>

                        <div class="row" style="padding-top:5px;">
                            <div class="col-sm-3" style="padding-top:5px">
                                <label>Department :</label>
                            </div>
                            <div class="col-sm-9">
                                <select ng-show="true" class="select2_demo_3 form-control" id="ddl_dept" ng-model="ddl_dept" style="width:100%;">
                                    <option value="">--Select here--</option>
                                    <option ng-repeat="lst in dept_list" value="{{lst.department_code}}">{{lst.department_name1}}</option>
                                </select>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-sm-12">
                            <button id="dtr_print2" class="btn btn-primary pull-right" ng-click="btn_print2()"><i class="fa fa-print"></i> Print DTR</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Print DTR Modal -->

    <div class="wrapper wrapper-content animated fadeInRight div_content_override">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-heading">
                        <div class="ibox-title" style="background-color:#1ab394;border-radius:5px 5px 0px 0px;">
                            <div class="row">
                                <div class="col-lg-12">
                                    <b>
                                        <h2 class="text-white"> @*@Model.menu_name*@ Daily DTR Upload</h2>
                                    </b>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ibox-content with-background">
                        <div class="row">
                            <div class="col-lg-12 m-b-md" style="padding-bottom:0px;margin-bottom:0px;">
                                <div class="tabs-container" style="padding-bottom:0px;margin-bottom:0px;">
                                    <ul class="nav nav-tabs" id="tab_dtr_up">
                                        <li id="tab1" class="active"><a data-toggle="tab" href="#tab-1"><b>Upload Data</b></a></li>
                                        <li id="tab2" class=""><a data-toggle="tab" href="#tab-2"><b>Employee DTR Data</b></a></li>
                                        <li id="tab3" class=""><a data-toggle="tab" href="#tab-3"><b>Extract Biometrics data</b></a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div id="tab-1" class="tab-pane active" style="padding-bottom:0px;margin-bottom:0px;">
                                            <div class="panel-body" style="min-height:70% !important;">
                                                <div class="row">
                                                    <div class="col-sm-2" style="padding-top:5px;">
                                                        <label>File :</label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        <input type="file" class="form-control text-left" name="input_file_upload" id="input_file_upload" accept=".dat" onchange="angular.element(this).scope().FileChange()" />
                                                        <span id="cancel_file" class="fa fa-times pull-right" style="margin-top:-25px;padding-right:10px;cursor:pointer;" ng-click="ClearFileField()"></span>
                                                        <label id="lbl_input_file_upload_req" class="lbl_required"></label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <button id="dtr_upload" class="btn btn-warning btn-block pull-right" ng-click="btn_upload()"><i class="fa fa-upload"></i> Upload/Extract</button>
                                                    </div>
                                                </div>

                                                <div class="row" style="padding-top:5px;">
                                                    <div class="col-sm-2" style="padding-top:5px">
                                                        <label>Month - Year :</label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <input type="text" class="form-control text-left" data-provide="datepicker" id="txtb_dtr_mon_year" ng-model="txtb_dtr_mon_year">
                                                        <span class="fa fa-calendar pull-right" style="margin-top:-25px;padding-right:10px;"></span>
                                                    </div>
                                                    <div class="col-sm-1" style="padding-top:5px">
                                                        <label>Day :</label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <select class="form-control field-select-sm" id="ddl_day" ng-model="ddl_day" ng-change="FilterPageGrid()">
                                                            <option value="" selected>--Select Here--</option>
                                                            <option ng-repeat="lst in day" value="{{lst.day}}">{{lst.day}}</option>
                                                        </select>
                                                        <label id="lbl_ddl_leave_type_req" class="lbl_required"></label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>Upload Type:</label>
                                                    </div>

                                                    <div class="col-sm-2">
                                                        <select class="form-control field-select-sm" id="ddl_upload_type" ng-model="ddl_upload_type">
                                                            <option value="1" selected>ALL</option>
                                                            <option value="2" selected>IN ONLY</option>
                                                            <option value="3" selected>OUT ONLY</option>
                                                        </select>
                                                        <label id="lbl_ddl_upload_type_req" class="lbl_required"></label>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <hr style="margin-top:10px;margin-bottom:10px" />
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <input type="search" style="font-weight:bold;" class="form-control" ng-model="search_box" ng-keyup="search_in_list(search_box,'datalist_grid')" placeholder="Search Table . . . .">
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="table-wrapper-scroll-y">
                                                            <div class="table-resposive">
                                                                <table id="datalist_grid" ng-model="datalist_grid" class="table_div table table-striped table-bordered table-hover table-responsive" style="width:100% !important;">
                                                                    <thead>
                                                                        <tr sstyle="background-color: #1AB394 !important;">
                                                                            <th width="8%">ID NO</th>
                                                                            <th width="27%">EMPLOYEE NAME</th>
                                                                            <th width="7.5%">AM IN</th>
                                                                            <th width="7.5%">AM OUT</th>
                                                                            <th width="7.5%">PM IN</th>
                                                                            <th width="7.5%">PM OUT</th>
                                                                            <th width="35%">REMARKS</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-2" class="tab-pane">
                                            <div class="panel-body" style="min-height:70% !important;">
                                                <div class="row">
                                                    <div class="col-sm-2" style="padding-top:5px">
                                                        <label>Employee Name :</label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        <select class="select2_demo_3 form-control" id="ddl_name" ng-model="ddl_name" ng-change="FilterPageGrid2()" style="width:100%;">
                                                            <option value="">--Select Here--</option>
                                                            <option ng-repeat="lst in empl_names" value="{{lst.empl_id}}">{{lst.employee_name}}</option>
                                                        </select>
                                                        <label id="lbl_ddl_name_req" class="lbl_required"></label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <button id="dtr_print" class="btn btn-primary btn-block pull-right" ng-click="btn_print()"><i class="fa fa-print"></i> Print DTR</button>
                                                    </div>
                                                </div>

                                                <div class="row" style="padding-top:5px;">
                                                    <div class="col-sm-2" style="padding-top:5px">
                                                        <label>Month - Year :</label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <input type="text" class="form-control text-left" data-provide="datepicker" id="txtb_dtr_mon_year2" ng-model="txtb_dtr_mon_year2">
                                                        <span class="fa fa-calendar pull-right" style="margin-top:-25px;padding-right:10px;"></span>
                                                        <label id="lbl_txtb_dtr_mon_year2_req" class="lbl_required"></label>
                                                    </div>
                                                    <div class="col-sm-5" style="padding-top:5px">

                                                    </div>

                                                    <div class="col-sm-2">
                                                        <button id="dtr_generation_empl" class="btn btn-warning btn-block pull-right" ng-click="btn_generate_empl()"><i class="fa fa-cogs"></i> Generate DTR</button>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <hr style="margin-top:10px;margin-bottom:10px" />
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                                            <div class="table-resposive">
                                                                <table id="datalist_grid2" ng-model="datalist_grid2" class="table_div table table-striped table-bordered table-hover table-responsive" style="width:100% !important;">
                                                                    <thead>
                                                                        <tr sstyle="background-color: #1AB394 !important;">
                                                                            <th width="15%">DATE</th>
                                                                            <th width="10%">AM IN</th>
                                                                            <th width="10%">AM OUT</th>
                                                                            <th width="10%">PM IN</th>
                                                                            <th width="10%">PM OUT</th>
                                                                            <th width="35%">REMARKS</th>
                                                                            <th width="10%">ACTION</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-3" class="tab-pane">
                                            <div class="panel-body" style="min-height:70% !important;">
                                                <div class="row">
                                                    <div class="col-sm-2" style="padding-top:5px">
                                                        <label>Biometrics Location :</label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        <select class="select2_demo_3 form-control" id="ddl_bioloc" ng-model="ddl_bioloc" ng-change="FilterPageGrid3()" style="width:100%;">
                                                            <option value="">--Select Here--</option>
                                                            <option ng-repeat="lst in biometrics_location" value="{{lst.MachineNumber}}">{{lst.bio_location}}</option>
                                                        </select>
                                                        
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <button id="dtr_print" class="btn btn-primary btn-block pull-right" ng-click="btn_bio_extract()"><i class="fa fa-print"></i> Extract</button>
                                                    </div>
                                                </div>

                                                <div class="row" style="padding-top:5px;">
                                                    
                                                        <div class="col-sm-2" style="padding-top:5px">
                                                            <label>Extract Period From:</label>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <input type="text" class="form-control text-left" data-provide="datepicker" id="extract_period_from" ng-model="extract_period_from">
                                                            <span class="fa fa-calendar pull-right" style="margin-top:-25px;padding-right:10px;"></span>
                                                        </div>
                                                   
                                                    <div class="col-sm-2" style="padding-top:5px">
                                                        <label>Extract Period To:</label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <input type="text" class="form-control text-left" data-provide="datepicker" id="extract_period_to" ng-model="extract_period_to">
                                                        <span class="fa fa-calendar pull-right" style="margin-top:-25px;padding-right:10px;"></span>
                                                       
                                                    </div>

                                                    @*<div class="col-sm-2">
                                                        <button id="dtr_generation_empl" class="btn btn-warning btn-block pull-right" ng-click="btn_generate_empl()"><i class="fa fa-cogs"></i> Generate DTR</button>
                                                    </div>*@
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <hr style="margin-top:10px;margin-bottom:10px" />
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                                            <div class="table-resposive">
                                                                <table id="datalist_grid2" ng-model="datalist_grid2" class="table_div table table-striped table-bordered table-hover table-responsive" style="width:100% !important;">
                                                                    <thead>
                                                                        <tr sstyle="background-color: #1AB394 !important;">
                                                                            <th width="15%">DATE</th>
                                                                            <th width="10%">AM IN</th>
                                                                            <th width="10%">AM OUT</th>
                                                                            <th width="10%">PM IN</th>
                                                                            <th width="10%">PM OUT</th>
                                                                            <th width="35%">REMARKS</th>
                                                                            <th width="10%">ACTION</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ibox-footer">
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>